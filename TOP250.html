<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="echarts.min.js"></script>
    <script src="data.js"></script>
    <style>
        *{
            padding: 0;
            margin: 0;
            list-style: none;
        }
        html ,body{
            width: 100%;
            height: 100%;
        }
        .echarts{
            width: 100%;
            height: 100%;
            background: #ccc;
        }
    </style>

</head>
<body>
<div class="echarts">

</div>
<script>
    window.onload=function () {
        let main=document.querySelector('.echarts');
        let myCharts=echarts.init(main);
        let option={
            title: {
                text: '电影类型',
                left: 'center',
                top: 20,
                textStyle: {
                    color: '#ccc'
                }
            },

            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            series : [
                {
                    name:'电影类型',
                    type:'pie',
                    radius : '55%',
                    center: ['50%', '50%'],
                    data:[
                        // {value:335, name:'直接访问'},
                        // {value:310, name:'邮件营销'},
                        // {value:274, name:'联盟广告'},
                        // {value:235, name:'视频广告'},
                        // {value:400, name:'搜索引擎'}
                    ].sort(function (a, b) { return a.value - b.value; }),
                }]

    }
    let arr=[]
        for(let i=1;i<categories.length;i++){
            let name=categories[i];
            let value=data.filter(elem=>elem[4].includes(name)).length;
            arr.push({name,value})
        }
        option.series[0].data=arr;
    myCharts.setOption(option);
    }
</script>
</body>
</html>